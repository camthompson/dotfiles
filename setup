#!/bin/bash

git submodule init
git submodule update

not_ignored() {
  local ignorelist=(setup update README.md default-gems ssh)
  for i in "${ignorelist[@]}"; do
    if [ "$1" = "$i" ]; then
      return 1
    fi
  done

  return 0
}

for f in *; do
  if not_ignored "$f"; then
    rm -rf "$HOME/.$f"
    ln -s "$PWD/$f" "$HOME/.$f"
  fi
done

mkdir -p "$HOME/.ssh"
cp -n ssh/config "$HOME/.ssh/config"
cp -n ssh/authorized_keys "$HOME/.ssh/authorized_keys"

chmod 0600 msmtprc
