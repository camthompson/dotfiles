#!/usr/bin/env ruby

Dir['vim/bundle/*'].each do |d|
  Dir.chdir(d) do
    if File.exist? '.git'
      `git pull`
    elsif File.exist? '.hg'
      `hg pull && hg update`
    elsif File.exist? '.svn'
      `svn update`
    end
  end
end

Dir['zsh/bundle/*'].each do |d|
  Dir.chdir(d) do
    `git pull`
  end
end

def push_to_github()
  `git add vim/bundle`
  `git commit -m 'Vim plugin update'`
  `git add zsh/bundle`
  `git commit -m 'ZSH plugin update'`
  `git push`
end

push_to_github unless `git status` =~ /nothing to commit/
